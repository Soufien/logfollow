<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{% module LocalCopy('/css/app.css') %}" />
        <script type="text/javascript"
        src="{% module LocalCopy('/js/socket.io.js') %}"></script>
        <script type="text/javascript"
        src="{% module LocalCopy('/js/jquery.min.js') %}"></script>
        <script type="text/javascript"
        src="{% module LocalCopy('/js/jquery.tmpl.js') %}"></script>
        <script type="text/javascript"
        src="{% module LocalCopy('/js/knockout-1.2.1.js') %}"></script>
        <script type="text/javascript" 
        src="{% module LocalCopy('/js/knockout.mapping.js') %}"></script>
        <link rel="icon" type="image/png" href="/favicon.ico" />
    </head>
    <script type="text/javascript">
        settings = {
            io: {
                port: {{ socket_io_port }},
                host: window.location.hostname
            }
        };
    </script>
    <body>
        
        <div id="wrapper" class="cf">
            <!-- main actions menu -->
            <ul id="mainActions">
                <li>
                    <a href="#" id="showAddForm">Add log</a>
                </li>
                <li>
                    <a href="#" id="showAddCategory">Add category</a>
                </li>
                <li>
                    <a href="#" data-bind="click: app.clearAll">Clear all saved data</a>
                </li>
            </ul>
            <!-- end main actions menu -->
            
            
            <!-- contain categories -->
            <aside>
                <h3 id="activeCategory" data-bind="text: app.data.activeCategory()[0].name()"></h3>
                
                
                <ul class="subCategories" data-bind="template: { name: 'window-inactive-list', foreach:categories}"></ul>

                <!-- subcategory item template -->
                <script id="window-inactive-list" type="text/html">
                    <li data-bind="visible: !$data.isActive()">
                        <a class="delete" href="#" class="remove" data-bind="visible: $data.isNotDefault(), click: $data.remove">X</a>
                        <a href="#" data-bind="text: $data.name(), click: $data.setActive"></a>
                    </li>
                </script>
                <!-- end subcategory item -->
                
            </aside>
            <!-- end aside -->
            
            <section id="log-holder" class="cf" data-bind="template: { name:'window', foreach:logs}"></section>

            <!-- log item template -->
            <script id="window" type="text/html">
                <div class="item ${$data.setErrorClass()}" data-bind="visible: $data.isActiveCategoryLog()">
                    <h5 data-bind="text: $data.name"></h5>
                    <a href="#" class="delete" data-bind="click: $data.remove">X</a>
                    <div class="body" data-bind="template: { name: 'message-item', foreach: $data.messages }"></div>
                    <div class="status-bar" data-bind="text: $data.error"></div>
                </div>
            </script>
            <!-- end log item template -->
            
            <!-- message template for item -->
            <script id="message-item" type="text/html">
                <span data-bind="text: $data"></span>
            </script>
            <!-- end message template -->
            
            <!-- -------------------  -->
            <!--      overlays        -->
            <!-- -------------------  -->
            <div id="log-form-holder" class="overlay" data-bind="template: 'addLog'"></div>

            <!-- add log form template  -->
            <script id="addLog" type="text/html">
                <div class="holder greeting">
                    <a href="#" class="close">X</a>
                    <form  data-bind="submit: app.addLog">
                        <p data-bind="text: staticText.addLogMessage, visible: !app.data.isFirstLog()"></p>
                        <p data-bind="text: staticText.greeting, visible: app.data.isFirstLog()"></p>
                        <p>
                            <label for="category-select">Choose category:</label>
                            <select id="category-select" multiple="multiple" data-bind="options: categories, optionsText: 'name', optionsValue: 'name'"></select>
                        </p>
                        <p>
                            <label for="log-name">Enter log name:</label>
                            <input  type="text" id="log-name" />
                        </p>
                        <p>
                            <label for="log-source">Enter log source:</label>
                            <input  type="text" id="log-source" />
                        </p>
                        <p style="text-align: right">
                            <input type="submit" value="Add" />						
                        </p>
                    </form>
                </div>
            </script>
            <!-- end add log form template  -->

            <div id="category-form-holder" class="overlay" data-bind="template: 'add-category'"></div>

            <!-- add category form template  -->
            <script id="add-category" type="text/html">
                <div class="holder category">
                    <a href="#" class="close">X</a>
                    <form  data-bind="submit: app.addCategory">
                        <p data-bind="text: staticText.addCategoryMessage"></p>
                        <p>
                            <label for="category-name">Choose name:</label>
                            <input type="text" id="category-name" />
                        </p>
                        <p style="text-align: right">
                            <input type="submit" value="Add" />						
                        </p>
                    </form>
                </div>
            </script>
            <!-- end add category form template  -->

        </div>

        <script type="text/javascript" src="/static/js/app.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                app.init();
            });
        </script>
    </body>
</html>
